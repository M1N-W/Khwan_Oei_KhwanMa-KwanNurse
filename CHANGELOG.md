# üìù CHANGELOG - KwanNurse-Bot v2.0.1

## ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: 01 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2026

### üêõ Bug Fixes

#### 1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Intent Name ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Dialogflow ‡∏™‡πà‡∏á `AssessRisk` ‡πÅ‡∏ï‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏Ñ‡πà `AssessPersonalRisk`
- **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö**: ‡∏ö‡∏≠‡∏ó‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤ "‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏Ñ‡πà‡∏∞ ‡∏ö‡∏≠‡∏ó‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ"
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: 
  ```python
  # Before
  elif intent == 'AssessPersonalRisk':
  
  # After
  elif intent == 'AssessPersonalRisk' or intent == 'AssessRisk':
  ```

#### 2. ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Parameter Name ‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: Dialogflow ‡∏™‡πà‡∏á `diseases` (‡∏û‡∏´‡∏π‡∏û‡∏à‡∏ô‡πå) ‡πÅ‡∏ï‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏Ñ‡πà `disease`
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**:
  ```python
  params.get('disease') or params.get('diseases')
  ```

#### 3. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç 404 Errors ‡∏à‡∏≤‡∏Å UptimeRobot
- **‡∏õ‡∏±‡∏ç‡∏´‡∏≤**: ‡πÑ‡∏°‡πà‡∏°‡∏µ endpoint `/` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ UptimeRobot ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 404
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡πÄ‡∏û‡∏¥‡πà‡∏° health check endpoint
  ```python
  @app.route('/', methods=['GET', 'HEAD'])
  def health_check():
      return jsonify({"status": "ok"}), 200
  ```

### ‚ú® Improvements

#### 1. ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Error Logging
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£ log ‡∏ä‡∏∑‡πà‡∏≠ intent ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å handle
- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
  ```python
  logger.warning("Unhandled intent: %s with params: %s", intent, params)
  return jsonify({
      "fulfillmentText": f"‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏Ñ‡πà‡∏∞ ‡∏ö‡∏≠‡∏ó‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á '{intent}' ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ"
  })
  ```

#### 2. ‡πÄ‡∏û‡∏¥‡πà‡∏° Health Check Endpoint
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö GET ‡πÅ‡∏•‡∏∞ HEAD requests
- ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• status ‡∏û‡∏£‡πâ‡∏≠‡∏° timestamp
- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô logs ‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢ 404 errors

### üìö Documentation

#### 1. SETUP_GUIDE.md
- ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables
- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤ LINE Group ID
- Checklist ‡∏Å‡πà‡∏≠‡∏ô Deploy

#### 2. .env.template
- Template ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Environment Variables
- ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞ variable
- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Render

#### 3. test_config.py
- Script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö configuration
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö webhook endpoints
- ‡∏™‡∏£‡πâ‡∏≤‡∏á curl commands ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö debugging

---

## üîÑ Migration Steps

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ Version ‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏¢‡∏π‡πà:

1. **‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°** (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
   ```bash
   cp app.py app.py.backup
   ```

2. **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡∏°‡πà**
   - ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà `app.py` ‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà

3. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables ‡πÉ‡∏ô Render**
   - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô `SETUP_GUIDE.md`
   - ‡πÉ‡∏ä‡πâ `.env.template` ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á

4. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô Deploy**
   ```bash
   python test_config.py
   ```

5. **Deploy ‡πÑ‡∏õ Render**
   ```bash
   git add .
   git commit -m "Update to v2.0.1 - Fix intent handling"
   git push origin main
   ```

6. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Logs**
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Render Dashboard > Logs
   - ‡∏î‡∏π‡∏ß‡πà‡∏≤ deploy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ errors

7. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô LINE**
   - ‡∏û‡∏¥‡∏°‡∏û‡πå: "‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡∏≠‡∏≤‡∏¢‡∏∏ 65 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 98 ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á 165 ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô"
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•

---

## üß™ Testing

### Test Cases ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á Deploy:

#### 1. AssessRisk Intent - High Risk
```
Input: "‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡∏≠‡∏≤‡∏¢‡∏∏ 65 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 98 ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á 165 ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô"
Expected: 
- ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á "‡∏™‡∏π‡∏á (High Risk)"
- ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á LINE notification ‡πÑ‡∏õ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•
```

#### 2. AssessRisk Intent - Low Risk
```
Input: "‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡∏≠‡∏≤‡∏¢‡∏∏ 30 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 60 ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á 170 ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏£‡∏Ñ"
Expected: 
- ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á "‡∏ï‡πà‡∏≥ (Low Risk)"
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á notification (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà high risk)
```

#### 3. ReportSymptoms Intent - Emergency
```
Input: "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ ‡∏õ‡∏ß‡∏î 10 ‡∏°‡∏µ‡πÑ‡∏Ç‡πâ ‡πÅ‡∏ú‡∏•‡∏°‡∏µ‡∏´‡∏ô‡∏≠‡∏á"
Expected: 
- ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô "üö® ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢"
- ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á LINE notification ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
```

#### 4. Health Check
```bash
curl https://kwannurse-bot.onrender.com/
Expected: {"status": "ok", "service": "KwanNurse-Bot", ...}
```

---

## üìä Changes Summary

### Files Modified:
- `app.py` - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç intent handling ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° health check

### Files Added:
- `SETUP_GUIDE.md` - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤
- `.env.template` - Template ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö environment variables
- `test_config.py` - Script ‡∏ó‡∏î‡∏™‡∏≠‡∏ö configuration
- `CHANGELOG.md` - ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ

### Dependencies:
‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á dependencies (‡πÉ‡∏ä‡πâ packages ‡πÄ‡∏î‡∏¥‡∏°)

---

## üö® Breaking Changes

‡πÑ‡∏°‡πà‡∏°‡∏µ Breaking Changes - ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡∏°‡πà backward compatible ‡∏Å‡∏±‡∏ö version ‡πÄ‡∏î‡∏¥‡∏°

---

## üîÆ Next Steps (Phase 2 Roadmap)

‡∏ï‡∏≤‡∏° Roadmap ‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ:

- [ ] Firestore Integration - ‡πÅ‡∏ó‡∏ô Google Sheets ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö state management
- [ ] State Machine - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö multi-turn conversation
- [ ] Triage Questionnaire - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á 
- [ ] Rule-Based Triage - Logic ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
- [ ] Image Recognition (Phase 3) - ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏†‡∏≤‡∏û‡πÅ‡∏ú‡∏•

---

## üë• Contributors

- Fix ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÇ‡∏î‡∏¢: Claude AI Assistant
- Testing ‡πÅ‡∏•‡∏∞ Documentation: ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå KwanNurse-Bot Team

---

## üìû Support

‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠:
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `SETUP_GUIDE.md`
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Logs ‡πÉ‡∏ô Render Dashboard
3. ‡πÉ‡∏ä‡πâ `test_config.py` ‡πÄ‡∏û‡∏∑‡πà‡∏≠ debug
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Dialogflow Console

---

**Version**: 2.0.1  
**Release Date**: 01 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2026  
**Status**: ‚úÖ Ready for Production

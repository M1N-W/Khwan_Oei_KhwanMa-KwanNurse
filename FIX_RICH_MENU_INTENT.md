# üîß ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Rich Menu Intent Confusion

## üêõ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠

‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤:
- ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢" ‚Üí ‡∏ñ‡∏≤‡∏° "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏ß‡∏î?" (ReportSymptoms)
- ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢" ‚Üí ‡∏ñ‡∏≤‡∏° "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏ß‡∏î?" (ReportSymptoms)
- ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•" ‚Üí ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚úÖ
- ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•" ‚Üí ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚úÖ (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π)

## üîç ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏

**Rich Menu ‡∏™‡πà‡∏á text ‡∏ó‡∏µ‡πà Dialogflow ‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î!**

### ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô:

Rich Menu ‡∏≠‡∏≤‡∏à‡∏°‡∏µ text ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ:
- "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£" ‚Üí ‚úÖ ‡∏ñ‡∏π‡∏Å (‡πÄ‡∏Ç‡πâ‡∏≤ ReportSymptoms)
- "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢" ‚Üí ‚ùå ‡∏ú‡∏¥‡∏î (‡πÄ‡∏Ç‡πâ‡∏≤ ReportSymptoms ‡πÅ‡∏ó‡∏ô GetKnowledge)
- "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢" ‚Üí ‚ùå ‡∏ú‡∏¥‡∏î (‡πÄ‡∏Ç‡πâ‡∏≤ ReportSymptoms ‡πÅ‡∏ó‡∏ô FollowUp?)
- "‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•" ‚Üí ‚úÖ ‡∏ñ‡∏π‡∏Å (‡πÄ‡∏Ç‡πâ‡∏≤ RequestAppointment)
- "‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•" ‚Üí ‚úÖ ‡∏ñ‡∏π‡∏Å (‡πÄ‡∏Ç‡πâ‡∏≤ ContactNurse)

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Rich Menu (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥!)

‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô text ‡∏ó‡∏µ‡πà Rich Menu ‡∏™‡πà‡∏á:

```json
{
  "areas": [
    {
      "bounds": {...},
      "action": {
        "type": "message",
        "text": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ"  // ‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢"
      }
    },
    {
      "bounds": {...},
      "action": {
        "type": "message",
        "text": "‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"  // ‚Üê ‡∏´‡∏£‡∏∑‡∏≠ "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥" ‡∏´‡∏£‡∏∑‡∏≠ "‡∏™‡∏£‡∏∏‡∏õ"
      }
    }
  ]
}
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏û‡∏¥‡πà‡∏° Training Phrases ‡πÉ‡∏ô Dialogflow

#### ‡πÉ‡∏ô GetKnowledge Intent ‡πÄ‡∏û‡∏¥‡πà‡∏°:
```
‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ
‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ
‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏´‡∏•‡∏±‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î
‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
```

#### ‡∏™‡∏£‡πâ‡∏≤‡∏á Intent ‡πÉ‡∏´‡∏°‡πà: GetFollowUpSummary
```
Intent Name: GetFollowUpSummary

Training Phrases:
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢
- ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°
- ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°
- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•
- follow up summary
- ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°
```

---

## üìã ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

### Step 1: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Rich Menu ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

‡πÉ‡∏ä‡πâ LINE Developers Console:

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://developers.line.biz/console/
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Provider ‚Üí Channel (KwanNurse-Bot)
3. ‡πÄ‡∏°‡∏ô‡∏π "Messaging API" ‚Üí "Rich menu"
4. ‡∏î‡∏π Rich menu ‡∏ó‡∏µ‡πà active ‡∏≠‡∏¢‡∏π‡πà
5. ‡πÄ‡∏ä‡πá‡∏Ñ "Action" ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°

**‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ:**
```
Button 1: "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£" ‚Üí Message: "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£" ‚úÖ
Button 2: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢" ‚Üí Message: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢" ‚ùå
Button 3: "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢" ‚Üí Message: "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢" ‚ùå
Button 4: "‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•" ‚Üí Message: "‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢" ‚úÖ
Button 5: "‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•" ‚Üí Message: "‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•" ‚úÖ
```

### Step 2: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Rich Menu (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ)

‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Action text ‡πÉ‡∏´‡πâ‡∏™‡∏±‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Training Phrases:

```json
{
  "areas": [
    {
      "bounds": {"x": 0, "y": 0, "width": 833, "height": 843},
      "action": {
        "type": "message",
        "text": "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£"
      }
    },
    {
      "bounds": {"x": 833, "y": 0, "width": 834, "height": 843},
      "action": {
        "type": "message",
        "text": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ"  // ‚Üê ‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
      }
    },
    {
      "bounds": {"x": 1667, "y": 0, "width": 833, "height": 843},
      "action": {
        "type": "message",
        "text": "‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"  // ‚Üê ‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
      }
    },
    {
      "bounds": {"x": 0, "y": 843, "width": 1250, "height": 843},
      "action": {
        "type": "message",
        "text": "‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢"
      }
    },
    {
      "bounds": {"x": 1250, "y": 843, "width": 1250, "height": 843},
      "action": {
        "type": "message",
        "text": "‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•"
      }
    }
  ]
}
```

**‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î Rich Menu ‡πÉ‡∏´‡∏°‡πà:**
- ‡πÉ‡∏ä‡πâ LINE Bot Designer ‡∏´‡∏£‡∏∑‡∏≠
- ‡πÉ‡∏ä‡πâ API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

### Step 3: ‡πÄ‡∏û‡∏¥‡πà‡∏° Training Phrases ‡πÉ‡∏ô Dialogflow

#### 3.1 ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç GetKnowledge Intent

‡πÑ‡∏õ‡∏ó‡∏µ‡πà Dialogflow Console ‚Üí Intent "GetKnowledge"

**‡πÄ‡∏û‡∏¥‡πà‡∏° Training Phrases:**
```
‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ
‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ
‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ
‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
knowledge
‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠
‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ
```

**Save** ‡πÅ‡∏•‡∏∞‡∏£‡∏≠ training ‡πÄ‡∏™‡∏£‡πá‡∏à

#### 3.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á Intent ‡πÉ‡∏´‡∏°‡πà: GetFollowUpSummary

**Intent Name:** `GetFollowUpSummary`

**Training Phrases:**
```
‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢
‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°
‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°
‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°
‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°
follow up
follow up summary
‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°
```

**Webhook:** ‚úÖ Enable

**Save**

#### 3.3 ‡πÄ‡∏û‡∏¥‡πà‡∏° Handler ‡πÉ‡∏ô webhook.py

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `routes/webhook.py` ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°:

```python
# ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô intent routing (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 82-110)

elif intent == 'GetFollowUpSummary':
    return handle_get_followup_summary(user_id)
```

‡πÄ‡∏û‡∏¥‡πà‡∏° function ‡πÉ‡∏´‡∏°‡πà‡∏Å‡πà‡∏≠‡∏ô `handle_unknown_intent`:

```python
def handle_get_followup_summary(user_id):
    """Handle follow-up summary request"""
    try:
        from services.reminder import get_reminder_summary
        
        summary = get_reminder_summary(user_id)
        
        if summary['total_reminders'] == 0:
            message = (
                "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏∞\n\n"
                "‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•\n"
                "‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥"
            )
        else:
            message = (
                f"üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°\n\n"
                f"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: {summary['total_reminders']} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á\n"
                f"‚úÖ ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß: {summary['responded']}\n"
                f"‚è≥ ‡∏£‡∏≠‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö: {summary['pending']}\n"
                f"‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö: {summary['no_response']}\n\n"
            )
            
            if summary['latest']:
                latest = summary['latest']
                message += (
                    f"‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:\n"
                    f"üìÖ {latest.get('type', '?')}\n"
                    f"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: {latest.get('status', '?')}\n"
                )
        
        return jsonify({"fulfillmentText": message}), 200
        
    except Exception as e:
        logger.exception(f"Error getting follow-up summary: {e}")
        return jsonify({
            "fulfillmentText": "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á"
        }), 200
```

### Step 4: Deploy ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

```bash
cd kwannurse-refactored

git add routes/webhook.py

git commit -m "Fix: Add GetFollowUpSummary intent handler"

git push origin main
```

‡∏£‡∏≠ Render deploy (~2 ‡∏ô‡∏≤‡∏ó‡∏µ)

---

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡πÉ‡∏ô Dialogflow Console:

**Test 1: Knowledge Intent**
```
Input: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ"
Expected: Intent = GetKnowledge ‚úÖ
```

**Test 2: Follow-up Summary Intent**
```
Input: "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢"
Expected: Intent = GetFollowUpSummary ‚úÖ
```

**Test 3: Report Symptoms**
```
Input: "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£"
Expected: Intent = ReportSymptoms ‚úÖ
```

### ‡πÉ‡∏ô LINE App:

1. **‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£"**
   - ‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏≤‡∏°: "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏ß‡∏î..." ‚úÖ

2. **‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢"**
   - ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏™‡∏î‡∏á: "üìö ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ..." ‚úÖ

3. **‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢"**
   - ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏™‡∏î‡∏á: "üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°..." ‚úÖ

4. **‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•"**
   - ‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏≤‡∏°: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏î‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∞?" ‚úÖ

5. **‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•"**
   - ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏™‡∏î‡∏á: "üìã ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á..." ‚úÖ

---

## üìù ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÅ‡∏Å‡πâ Rich Menu (‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô text: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢" ‚Üí "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ"
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô text: "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢" ‚Üí "‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤: 10 ‡∏ô‡∏≤‡∏ó‡∏µ

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏û‡∏¥‡πà‡∏° Training Phrases (‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
- ‡πÄ‡∏û‡∏¥‡πà‡∏° phrases ‡πÉ‡∏ô GetKnowledge
- ‡∏™‡∏£‡πâ‡∏≤‡∏á Intent GetFollowUpSummary
- ‡πÄ‡∏û‡∏¥‡πà‡∏° handler ‡πÉ‡∏ô webhook
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤: 30 ‡∏ô‡∏≤‡∏ó‡∏µ

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏ó‡∏≥‡∏ó‡∏±‡πâ‡∏á 2 ‡∏ß‡∏¥‡∏ò‡∏µ (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥!)
- Rich Menu + Training Phrases
- ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤: 30 ‡∏ô‡∏≤‡∏ó‡∏µ

---

## ‚úÖ Checklist

### ‡πÅ‡∏Å‡πâ Rich Menu:
- [ ] ‡πÄ‡∏Ç‡πâ‡∏≤ LINE Developers Console
- [ ] ‡∏î‡∏π Rich Menu ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô text actions
- [ ] ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î Rich Menu ‡πÉ‡∏´‡∏°‡πà
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô LINE

### ‡πÅ‡∏Å‡πâ Dialogflow:
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° training phrases ‡πÉ‡∏ô GetKnowledge
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á Intent GetFollowUpSummary
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° training phrases
- [ ] Enable webhook
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Dialogflow console

### ‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î:
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° handler ‡πÉ‡∏ô webhook.py
- [ ] Commit ‡πÅ‡∏•‡∏∞ push
- [ ] ‡∏£‡∏≠ Render deploy
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô LINE

---

## üéØ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏à‡∏≠

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Training phrases ‡πÑ‡∏°‡πà‡∏û‡∏≠

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** Dialogflow ‡∏¢‡∏±‡∏á‡πÅ‡∏õ‡∏•‡∏ú‡∏¥‡∏î

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‡πÄ‡∏û‡∏¥‡πà‡∏° training phrases ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 10 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ/intent)

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Intent ‡∏ä‡∏ô‡∏Å‡∏±‡∏ô

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** ‡∏Ñ‡∏≥‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏•‡∏≤‡∏¢ intents

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** 
1. ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà specific ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
2. ‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ã‡πâ‡∏≥‡πÉ‡∏ô intent ‡∏≠‡∏∑‡πà‡∏ô
3. ‡∏ï‡∏±‡πâ‡∏á priority

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Rich Menu ‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï

**‡∏≠‡∏≤‡∏Å‡∏≤‡∏£:** ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Å‡πà‡∏≤

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
1. ‡∏•‡∏ö Rich Menu ‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å
2. ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà
3. Set ‡πÄ‡∏õ‡πá‡∏ô default
4. Unfollow ‚Üí Follow bot ‡πÉ‡∏´‡∏°‡πà

---

‡∏•‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡πÅ‡∏Å‡πâ Rich Menu ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö (‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏° Training Phrases

‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏´‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö? üòä
